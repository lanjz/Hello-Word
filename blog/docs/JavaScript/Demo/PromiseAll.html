<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<script>
  function pro1(){
    return new Promise(resolve => {
      setTimeout(() => {
        resolve('pro1')
      }, 3000)
    })
  }
  function pro2(){
    return new Promise(resolve => {
      setTimeout(() => {
        resolve('pro2')
      }, 1000)
    })
  }
  function pro3(){
    return new Promise(resolve => {
      setTimeout(() => {
        resolve('pro3')
      }, 2000)
    })
  }
  function PromiseAll(stack){
    let len = stack.length
    let result = new Array(len)
    return new Promise((resolve, reject) => {
      stack.forEach((item, index) => {
        item.then(res => {
          console.log('ind', res, index)
          result[index] = res
          len--
          if(!len){
            resolve(result)
          }
        })
          .catch(err => {
            reject(err)
          })
      })
    })
  }
  PromiseAll([pro1(), pro2(), pro3()]).then(res => console.log(res))
</script>

<script>
  function carry(){
    let count = 0
    let fn = function (){
      if(!arguments.length){
        let tem = count
        count = 0
        return tem
      } else {
        for(let i of arguments){
          count += i
        }
        return fn
      }
    }
    return fn
  }
  let add = carry()
  console.log(add(1)(2)()) // 3
  console.log(add(1)(2,3)(4)()) // 10
</script>
</body>
</html>