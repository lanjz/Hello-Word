# SQL和NoSQL区别

## 概念

- SQL：关系型数据库

- NoSQL: 非关系型数据库

## 存储方式

- SQL：存储在特定结构的表中

- NoSQL：存储方式更加灵活，可以是 JSO，哈希等其它形式

## 表/数据集合的数据的关系

- SQ：必须定义好表结构后才能添加数据，例如定义表的主键(primary key)，索引(index),触发器(trigger),存储过程(stored procedure)等

- NoSQL:数据可以在任何时候任何地方添加，不需要先定义表

## 外部数据存储

- SQL：需要增加外部关联数据的话，规范化做法是在原表中增加一个外键，关联外部数据表,例如需要在借阅表中增加审核人信息，先建立一个审核人表

  ![](https://upload-images.jianshu.io/upload_images/1744544-1ac579409de4e80f.png?imageMogr2/auto-orient/strip|imageView2/2/w/758/format/webp)
  
  再在原来的借阅人表中增加审核人外键
  
  ![](https://upload-images.jianshu.io/upload_images/1744544-c2a801eed3188870.png?imageMogr2/auto-orient/strip|imageView2/2/w/752/format/webp)
  
  这样如果我们需要更新审核人个人信息的时候只需要更新审核人表而不需要对借阅人表做更新。

- NoSQL: 除了这种规范化的外部数据表做法以外，我们还能用如下的非规范化方式把外部数据直接放到原数据集中，以提高查询效率。缺点也比较明显，更新审核人数据的时候将会比较麻烦。

  ![](https://upload-images.jianshu.io/upload_images/1744544-456469a12715e9b5.png?imageMogr2/auto-orient/strip|imageView2/2/w/763/format/webp)
  
## SQL中的JOIN查询

- SQL: 可以使用JOIN表链接方式将多个关系数据表中的数据用一条简单的查询语句查询出来

- NoSQL: NoSQL暂未提供类似JOIN的查询方式对多个数据集中的数据做查询。所以大部分NoSQL使用非规范化的数据存储方式存储数据

## 数据耦合性

- SQL: 无法删除被使用的外部数据，例如审核人表中的"熊三"已经被分配给了借阅人熊大，那么在审核人表中将不允许删除熊三这条数据，以保证数据完整性。
                    
- NoSQL: 没有这种强耦合的概念，可以随时删除任何数据

## 事务

- SQL ：如果多张表数据需要同批次被更新，即如果其中一张表更新失败的话其他表也不能更新成功。
  这种场景可以通过事务来控制，可以在所有命令完成后再统一提交事务
  
- NoSQL： 没有事务这个概念，每一个数据集的操作都是原子级的。

## 增删改查语法

## 查询性能

这个比较有争议。在相同水平的系统设计的前提下，因为NoSQL中省略了JOIN查询的消耗，故理论上性能上是优于SQL的

# 事务四大特征(ACID)
  
- 原子性(A)：事务是最小单位，不可再分

- 一致性(C)：事务要求所有的DML语句操作的时候，必须保证同时成功或者同时失败

-  隔离性(I)：事务A和事务B之间具有隔离性

- 持久性(D)：是事务的保证，事务终结的标志(内存的数据持久到硬盘文件中)
  

