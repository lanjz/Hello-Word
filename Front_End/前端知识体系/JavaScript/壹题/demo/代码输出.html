<html>
    <script>
        function LazyManClass(name){
            console.log(`Hi I am ${name}`)
            this.stack = []
            setTimeout(() => {
                this.next()
            })
            return this
        }
        LazyManClass.prototype.next = async function(time){
            let fn = this.stack.shift()
            while(fn) {
                await fn()
                fn = this.stack.shift()
            }
            
            return this
        }
        LazyManClass.prototype.sleep = function(time){
            this.stack.push(async function(){
                await new Promise((resolve) => {
                setTimeout(resolve, time*1000)
            })
            })
            return this
        }
        LazyManClass.prototype.sleepFirst = function(time){
            this.stack.unshift(async function(){
                await new Promise((resolve) => {
                setTimeout(() => {
                    resolve()
                }, time*1000)
            })
            })
            return this
        }
        LazyManClass.prototype.eat = function(foot){
            this.stack.push(function(){
                console.log(`I am eating ${foot}`)
            })
            return this
        }
        function LazyMan(name) {
            return new LazyManClass(name)
        }
        LazyMan('Tony').eat('lunch').eat('dinner').sleepFirst(5).sleep(10).eat('junk food')
    </script>
</html>