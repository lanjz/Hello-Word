<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>第6题：请分别用深度优先思想和广度优先思想实现一个拷贝函数？</title>
</head>
<body>
<script>
	let nodes = {
		children: [],
		name: 0
	}
	function createNote(node, scope, deep, preName = '') {
		for(let i = 1; i <= scope; i ++) {
			const curNode = {
				name: preName+i,
				children: []
			}
			node.push(curNode)
			if(deep) {
				createNote(curNode.children, scope, deep-1, curNode.name+'-')
			}
		}
	}
	function getType(data) {
		const typeToString = Object.prototype.toString.call(data)
		// Array、String、Function、Array、Number
		return typeToString.substring(8, typeToString.length - 1)
	}

	console.log('---------生成一个Tree--------')
	createNote(nodes.children, 3, 3)
	console.log('nodes', nodes)
	console.log('---------深度优先遍历--------')
    function deepCopy(data) {
		const type = getType(data)
        let obj
        if(type === 'Array' || type === 'Object') {
			obj = type === 'Array' ? [] : {}
			for(let i in data) {
				obj[i] = deepCopy(data[i])
            }
            return obj
        }
        return obj
	}
	const newObj = deepCopy(nodes)
    console.log('newObj', newObj)
	console.log('---------广度优先遍历--------')
	function broadCopy(data = {}) {
		let el = getType(data) === 'Array' ? [] : {}
		const oldArr = [data]
		const newArr = [el]
		let curOldNode = oldArr.shift()
		let curNewNode = newArr.shift()
		while (curOldNode) {
			for(let i in curOldNode) {
                if(getType(curOldNode[i]) === 'Array' || getType(curOldNode[i]) === 'Object'){
					const inEl = getType(curOldNode[i]) === 'Array' ? [] : {}
					curNewNode[i] = inEl
					oldArr.push(curOldNode[i])
					newArr.push(inEl)
                } else {
					curNewNode[i] = curOldNode[i]
                }
            }
			curOldNode = oldArr.shift()
			curNewNode = newArr.shift()

		}
		return el
	}
	const newBroadObj = broadCopy(nodes)
	console.log('newObj', newBroadObj)

</script>
</body>
</html>
