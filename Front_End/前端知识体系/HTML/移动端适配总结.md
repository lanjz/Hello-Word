# 移动端适配总结

移动端适配总结

## 视口 viewport

viewport 解释为中文就是‘视口’的意思，也就是浏览器中用于显示网页的区域。在 PC 端，其大小也就是浏览器可视区域的大小，所以我们也不会太关注此概念；
而在移动端，绝大多数情况下 viewport 都大于浏览器可视区，保证 PC 页面在移动浏览器上面的可视性。为提升可视性体验，针对移动端有了对 viewport 的深入研究。

这里以iphone6为例子来讲解：

![](https://images2018.cnblogs.com/blog/1122916/201803/1122916-20180322181204968-1659044228.png)

这里我们会看到，为什么 body的宽度是 980px，而浏览器的宽度只有 375px，那么这个 980px到底是从哪里来的呢？

其实，这里的 980px就是移动端所谓的布局视口了

但这并不是屏幕的真实宽高尺寸，为了解决这个问题苹果引入了理想视口的概念，它是对设备来说最理想的布局视口尺寸，所以就有以下代码

```
<meta name ="viewport" content="width=device-width">
```

添加以上代码后，我们重新刷新页面就可以看到屏幕的尺寸变为了 375 * 667 与屏幕一致了

然而，这段代码其实也并不完美，在IE浏览器中，由于横屏竖屏的切换会对其造成影响，为了解决这个兼容性的问题，最后再加上一句，就有了现在的：

```
<meta name='viewport' content='width=device-width,initial-scale=1,user-scale=no' />
```

`initial-scale=1` 的意思是初始缩放的比例是1，使用它的时候，同时也会将布局视口的尺寸设置为缩放后的尺寸。而缩放的尺寸就是基于屏幕的宽度来的

## 设备像素比 dpr 与 1px 物理像素

**物理像素（physical pixel）**

手机屏幕上显示的最小单元，该最小单元具有颜色及亮度的属性可供设置，iphone6、7、8 为：750 * 1334，iphone6+、7+、8+ 为 1242 * 2208

**设备独立像素（density-indenpendent pixel）**

此为逻辑像素，计算机设备中的一个点，css 中设置的像素指的就是该像素。老早在没有 retina 屏之前，设备独立像素与物理像素是相等的。

**设备像素比（device pixel ratio）**

设备像素比(dpr) = 物理像素/设备独立像素。如 iphone 6、7、8 的 dpr 为 2，那么一个设备独立像素便为 4 个物理像素，
因此在 css 上设置的 `1px` 在其屏幕上占据的是 2个物理像素，`0.5px` 对应的才是其所能展示的最小单位。这就是 `1px` 在 retina 屏上变粗的原因

![](https://user-gold-cdn.xitu.io/2018/12/10/1679612a0e09ccb3?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

### 1px的物理像素的解决方案

从第一部分的讨论可知 viewport 的 `initial-scale` 具有缩放页面的效果。对于 `dpr=2` 的屏幕，`1px`压缩一半便可与`1px`的设备像素比匹配，
这就可以通过将缩放比 `initial-scale` 设置为 `0.5` 实现。以此类推 `dpr=3` 的屏幕可以将 `initial-scale` 设置为 `0.33` 来实现。

# 设备像素比 dpr 与 rem 的适配方案

rem 是相对于根元素 `html` 的 `font-size` 来做计算。通常在页面初始化时加载时通过对`document.documentElement.style.fontSize` 设置来实现


[深入浅出移动端适配（总结版）](https://juejin.im/post/5d87518f6fb9a06aed715ecf#heading-23)