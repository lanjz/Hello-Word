## Webpack实现按需加载

例子：

- 网页首次加载时只加载了`main.js`文件，网页会展示一个按钮，在`main.js`文件中只包含监听按钮事件和加载按需加载的代码

- 在按钮触发时才加载分割出来的`show.js`文件，在加载成功后再执行`show.js`函数

`main.js`：

```
window.document.getElementById('btn').addEventListener('click', function () {
    import(/* webpackChunkName: "show"*/ './show')
      .then((show) => {
      show('Webpack')
      })
  })
```

`show.js`代码如下：

```
  module.exports = function () {
    window.alert('Hello' + content)
  }
```

关键代码：`import (/* webpackChunkName: "show"*/, './show')`

Webpack内置了对import(*)语句的支持，当Webpack遇到了类似的语句时会这样处理：

- 以`./show.js`为入口重新生成一个Chunk，这个Chunk的名字就是`(/* webpackChunkName: "show"`定义的webpackChunkName的值 ，这里叫作show

- 当代执行到import所在的语句时才会加载由Chunk对应生成的文件

- imoprt返回一个Promise，当文件加载成功时可以在Promise的then方法中获取show.js导出的内容

为了正确输出在`/* webpackChunkName: "show"`中配置的ChunkName，还需要配置Webpack

```
module.exports = {
  entry: {
    main: './main.js',
  },
  output: {
    // 为从entry中配置生成的Chunk配置输出文件的名称
    filename: '[name].js',
    // 为动态加载的Chunk配置输出文件的名称
    chunkFilename: '[name].js'
  }
}
```

其中，最关键的一行是`chunkFilename: '[name].js'`，它专门来指定动态生的Chunk在输出时的文件名称。默认的文件名称将会是`[id].js`

