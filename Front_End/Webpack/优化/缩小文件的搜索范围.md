## 优化Loader配置

Loader对文件的转换非常的耗时，我们可以利用`exclude`、`test`、`include`属性，优化要使用Loader的文件，尽可能少的让文件被Loader处理

```
module.exports = {
  module: {
    rules:[
      {
        test: /\.js$/, //如果项目源码中只有JS文件，就不要写成/\.jsx?$/，以提升正则表达式的性能
        use: ['babel-loader?cacheDirectory'], // label-loader支持缓存转换出的结果，通过cacheDirectory来启动
        include: path.resolve(__dirname, 'src') // 只对项目根目录下的src目录中的文件采用babel-loader
      }
    ]
  }
}

```

## 优化resolve.modules配置

`resolve.modules`作用：

配置webpack去哪个目录寻找第三方模块，webapck默认会在当前项目根目录的`node_modules`下寻找第三方模块，如果当前`node_modules`没有找到对应的模块则去上一级目录下的`node_modules`中找，以此类推。

结果实际的开发使用场景，我们并不需要一层层地寻找，因此我们可以指定第三方模块的目录，减少webpack的寻找，配置如下：

```
module.exports = {
  resolve: {
   //  dirname表示当前工作目录，也就是项目根目录
    modules: [path.resovle(__dirname, 'node_modules')]
  }
}

```

## 优化resolve.mainFileds配置

`resolve.mainFileds`作用：

配置第三方模块使用哪个入口文件

在安装第三模块时都有一个`package.json`文件来描述这个模块的入口文件，可是有的模块根据环境配置多个入口文件

`resolve.mainFileds`的默认值和当前的`target`配置有关系，对应的关系如下

- 当`tartget`为web或者webworker时，值是["brower", "module", "main"]

- 当`target`为其它情况时，值是[ "module", "main"]

以`target`等于web为例，webpack会先采用第三方模块中的`brower`字段去寻找模块，如果不存在，则从`module`中寻找，其次再从`main`中寻找。

为了减少搜索步骤，我们明确第三方模块的入口字段

```
module.exports = {
  resolve: {
    mainFields: ['main']
  }
}
```

## 优化resolve.alias配置

resolve.alias作用：

通过别名将原来导入第三方模块的路径修改为新的路径

有些第三方模块安装时，会有多套代码，比如React

有个`dist`目录，是将所有代码打包好的放在一个单独的文件中，这个文件没有被模块化，可以直接引入执行

另一个是`lib`目录，是一套采用CommonJs规范的模块化代码，以package.json中指定的入口文件react.js为模块的入口

默认情况下，webapck引入`lib`目录下的文件时，会递归解析和处理这些文件，这会是一个耗时的操作。这时可以通过`resolve.alias`来配置使用单独的完整的`dist`下的文件，减少搜索时间

```
module.exports = {
  resolve: {
    alias: {
      'react': path.resolve(__dirname, './node_modules/react/dist/react.min.js')
    }
  }
}
```

但是，使用这种优化虽然可以减少搜索，但是会引入模块中没用到的代码，这不利于`Tree-Sharking`使用，比如在使得lodash时，我们可能只用到部分功能，如果使用这个配置优化，将会把所有包括没用到的也引用项目当中

## 优化resolve.extensions配置

默认情况下，webapck寻找没有带后缀的文件时，会自动带上后缀去寻找，默认是通过`resolve.extension`配置的后缀列表按顺序去寻找，默认是：

`extensions:['.js', '.json']`

因为我们可以根据以下情况去优化`resolve.extensions`

- 没使用到的后缀名不列表入`resolve.extensions`中

- 高频后缀名放在前面

- 在引入文件时，不要忽略后缀名，将后缀名书完整

```
module.exports = {
  resolve: {
    extensions: ['js']
  }
}
```

## 优化resolve.noParse配置

`resolve.noParse`作用：

对于没有模块化的文件，能过这个配置让webpack忽略对这些文件的递归解析，以此提高构建性能。比如`JQuery`、'ChartJs'等没用采用模块化的方式，让webpack解析这些文件即耗时又没有意义

```
module.exports = {
  resolve: {
    noParse: [/react\.min\.js$/]
  }
}

```

